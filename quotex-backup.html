<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quotex Demo - Binary Options Trading</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Inter', sans-serif;
            background: #0a0a0a;
            color: #ffffff;
            overflow: hidden;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Top Bar */
        .top-bar {
            background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
            border-bottom: 1px solid #333;
            padding: 12px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            box-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .logo {
            font-size: 24px;
            font-weight: 800;
            background: linear-gradient(45deg, #00ff7f, #00e676);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .demo-badge {
            background: #333;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            color: #00ff7f;
            font-weight: 600;
        }

        .account-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .balance {
            font-size: 18px;
            font-weight: 700;
            color: #00ff7f;
        }

        .action-buttons {
            display: flex;
            gap: 12px;
        }

        .btn-secondary {
            background: #333;
            border: 1px solid #444;
            color: #fff;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .btn-secondary:hover {
            background: #444;
            border-color: #555;
        }

        /* Main Layout */
        .main-layout {
            flex: 1;
            display: flex;
            overflow: hidden;
        }

        /* Left Sidebar */
        .sidebar {
            width: 320px;
            background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
            border-right: 1px solid #333;
            display: flex;
            flex-direction: column;
        }

        .sidebar-menu {
            padding: 20px 0;
        }

        .menu-item {
            padding: 16px 24px;
            color: #b3b3b3;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }

        .menu-item:hover, .menu-item.active {
            background: rgba(0,255,127,0.1);
            color: #00ff7f;
            border-left-color: #00ff7f;
        }

        .menu-item i {
            width: 20px;
            text-align: center;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Chart Area */
        .chart-area {
            flex: 1;
            background: #0a0a0a;
            position: relative;
            border-bottom: 1px solid #222;
        }

        .chart-header {
            background: #1a1a1a;
            border-bottom: 1px solid #333;
            padding: 16px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .asset-info {
            display: flex;
            align-items: center;
            justify-content: flex-start;
            gap: 16px;
        }

        .asset-name {
            font-size: 20px;
            font-weight: 700;
            color: #fff;
        }

        .current-price {
            font-size: 24px;
            font-weight: 800;
            color: #ff4444;
        }

        .price-change {
            font-size: 14px;
            color: #ff4444;
            font-weight: 600;
        }

        .timeframes {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .timeframe-btn {
            background: #333;
            border: 1px solid #444;
            color: #b3b3b3;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s ease;
        }

        .timeframe-btn.active {
            background: #00ff7f;
            color: #000;
            border-color: #00ff7f;
        }

        .chart-container {
            height: calc(100% - 73px);
            position: relative;
            background: #0a0a0a;
        }

        canvas {
            width: 100%;
            height: 100%;
            display: block;
        }

        /* Trading Panel */
        .trading-panel {
            height: 300px;
            background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
            border-top: 1px solid #333;
            padding: 24px;
            display: flex;
            gap: 24px;
        }

        .trade-controls {
            flex: 1;
        }

        .panel-title {
            font-size: 18px;
            font-weight: 700;
            color: #fff;
            margin-bottom: 16px;
        }

        .input-group {
            margin-bottom: 16px;
        }

        .input-label {
            display: block;
            font-size: 12px;
            color: #b3b3b3;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
        }

        .input-field {
            width: 100%;
            background: #0a0a0a;
            border: 1px solid #444;
            border-radius: 8px;
            color: #fff;
            padding: 12px 16px;
            font-size: 14px;
            font-weight: 500;
        }

        .input-field:focus {
            outline: none;
            border-color: #00ff7f;
        }

        .amount-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-bottom: 8px;
        }

        .amount-btn {
            background: #333;
            border: 1px solid #444;
            color: #fff;
            padding: 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .amount-btn.active, .amount-btn:hover {
            background: #00ff7f;
            color: #000;
            border-color: #00ff7f;
        }

        .payout-info {
            background: #0a0a0a;
            border-radius: 8px;
            padding: 12px 16px;
            margin-bottom: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .payout-label {
            color: #b3b3b3;
            font-size: 12px;
        }

        .payout-value {
            color: #00ff7f;
            font-weight: 700;
            font-size: 14px;
        }

        .trade-buttons {
            display: flex;
            justify-content: space-between;
            gap: 12px;
        }

        .trade-btn {
            padding: 16px 20px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .trade-btn.up {
            background: #00aa00;
            color: white;
        }

        .trade-btn.up:hover:not(:disabled) {
            background: #008800;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 170, 0, 0.3);
        }

        .trade-btn.down {
            background: #cc0000;
            color: white;
        }

        .trade-btn.down:hover:not(:disabled) {
            background: #aa0000;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(204, 0, 0, 0.3);
        }

        .trade-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .countdown-timer {
            background: linear-gradient(135deg, #00ff7f 0%, #00e676 100%);
            color: #000;
            padding: 16px;
            border-radius: 8px;
            text-align: center;
            font-size: 20px;
            font-weight: 700;
            margin-top: 16px;
            display: none;
        }

        .trade-result {
            flex: 1;
            background: #0a0a0a;
            border-radius: 8px;
            padding: 16px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .result-icon {
            font-size: 48px;
            margin-bottom: 12px;
        }

        .result-amount {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .result-text {
            color: #b3b3b3;
            font-size: 14px;
        }

        /* Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
            border-radius: 16px;
            padding: 32px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            border: 1px solid #333;
        }

        .modal-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 16px;
            color: #fff;
        }

        .modal-text {
            color: #b3b3b3;
            margin-bottom: 24px;
            line-height: 1.6;
        }

        .modal-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .modal-btn {
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .modal-btn.primary {
            background: #00ff7f;
            color: #000;
            border: none;
        }

        .modal-btn.primary:hover {
            background: #00e676;
        }

        .modal-btn.secondary {
            background: #333;
            color: #fff;
            border: 1px solid #444;
        }

        .modal-btn.secondary:hover {
            background: #444;
        }

        /* Asset Categories */
        .asset-categories {
            flex: 1;
            padding: 20px 0;
            overflow-y: auto;
        }

        .category-title {
            font-size: 14px;
            font-weight: 700;
            color: #b3b3b3;
            text-transform: uppercase;
            letter-spacing: 1px;
            padding: 0 24px;
            margin-bottom: 16px;
        }

        .asset-search {
            width: calc(100% - 48px);
            margin: 0 24px 20px;
            padding: 12px 16px;
            background: #0a0a0a;
            border: 1px solid #444;
            border-radius: 8px;
            color: #fff;
            font-size: 14px;
        }

        .asset-search:focus {
            outline: none;
            border-color: #00ff7f;
        }

        .category-section {
            margin-bottom: 24px;
        }

        .category-header {
            padding: 12px 24px;
            background: rgba(0,255,127,0.05);
            border-left: 3px solid #00ff7f;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            transition: all 0.3s ease;
        }

        .category-header:hover {
            background: rgba(0,255,127,0.1);
        }

        .category-header span {
            font-weight: 600;
            color: #fff;
        }

        .category-toggle {
            color: #b3b3b3;
            transition: transform 0.3s ease;
        }

        .asset-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .asset-list.collapsed {
            max-height: 0;
            overflow: hidden;
        }

        .asset-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }

        .asset-item:hover {
            background: rgba(255,255,255,0.05);
        }

        .asset-item.active {
            background: rgba(0,255,127,0.1);
            border-left-color: #00ff7f;
        }

        .asset-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .asset-icon {
            width: 32px;
            height: 32px;
            border-radius: 6px;
            background: linear-gradient(135deg, #333, #444);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: #fff;
            font-size: 14px;
        }

        .asset-item span {
            font-weight: 600;
            color: #fff;
        }

        .asset-price {
            font-weight: 700;
            color: #fff;
            text-align: right;
        }

        .asset-change {
            font-size: 12px;
            font-weight: 600;
            text-align: right;
            min-width: 60px;
        }

        .asset-change.positive {
            color: #00aa00;
        }

        .asset-change.negative {
            color: #cc0000;
        }

        /* Result Tabs */
        .result-tabs {
            display: flex;
            margin-bottom: 16px;
        }

        .result-tab {
            flex: 1;
            padding: 8px 16px;
            background: #333;
            border: none;
            color: #b3b3b3;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .result-tab.active {
            background: #00ff7f;
            color: #000;
        }

        .tab-content {
            text-align: center;
        }

        .trade-history {
            max-height: 200px;
            overflow-y: auto;
        }

        /* Statistics Widget */
        .stats-widget {
            background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
            border: 1px solid #333;
        }

        .stats-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
        }

        .stat-item {
            text-align: center;
            padding: 12px;
            background: #0a0a0a;
            border-radius: 6px;
        }

        .stat-label {
            font-size: 11px;
            color: #b3b3b3;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .stat-value {
            font-size: 18px;
            font-weight: 700;
            color: #fff;
        }

        .stat-value.positive {
            color: #00aa00;
        }

        .stat-value.negative {
            color: #cc0000;
        }

        /* Price Alert Indicator */
        .price-indicator {
            position: absolute;
            top: 50%;
            right: 20px;
            transform: translateY(-50%);
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            animation: pulse 2s infinite;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .price-indicator.active {
            opacity: 1;
        }

        .price-indicator.up {
            background: radial-gradient(circle, rgba(0, 170, 0, 0.3), transparent);
            color: #00aa00;
        }

        .price-indicator.down {
            background: radial-gradient(circle, rgba(204, 0, 0, 0.3), transparent);
            color: #cc0000;
        }

        @keyframes pulse {
            0%, 100% {
                transform: translateY(-50%) scale(1);
            }
            50% {
                transform: translateY(-50%) scale(1.1);
            }
        }

        /* News Ticker */
        .news-ticker {
            background: #1a1a1a;
            border-top: 1px solid #333;
            padding: 8px 24px;
            overflow: hidden;
            position: relative;
            height: 35px;
        }

        .ticker-content {
            display: flex;
            animation: scroll 30s linear infinite;
            white-space: nowrap;
        }

        .ticker-item {
            display: inline-flex;
            align-items: center;
            margin-right: 40px;
            font-size: 13px;
            color: #b3b3b3;
        }

        .ticker-item i {
            margin-right: 8px;
            color: #00ff7f;
        }

        @keyframes scroll {
            0% {
                transform: translateX(0);
            }
            100% {
                transform: translateX(-50%);
            }
        }

        /* Market Status Badge */
        .market-status {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: #333;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #00ff7f;
            animation: blink 2s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        /* Loading Spinner */
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #333;
            border-top-color: #00ff7f;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* AI Prediction Signal */
        .prediction-signal {
            background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
            border: 2px solid #00ff7f;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            animation: glow 2s infinite;
        }

        @keyframes glow {
            0%, 100% {
                box-shadow: 0 0 5px rgba(0, 255, 127, 0.3);
            }
            50% {
                box-shadow: 0 0 20px rgba(0, 255, 127, 0.6);
            }
        }

        .signal-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
            color: #00ff7f;
            font-weight: 700;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .signal-header i {
            font-size: 18px;
        }

        .signal-body {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .signal-direction {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            background: rgba(204, 0, 0, 0.2);
            border-radius: 8px;
            border: 2px solid #cc0000;
        }

        .signal-direction.bullish {
            background: rgba(0, 170, 0, 0.2);
            border-color: #00aa00;
        }

        .signal-direction.bullish span {
            color: #00aa00;
        }

        .signal-direction i {
            font-size: 24px;
            color: #cc0000;
        }

        .signal-direction.bullish i {
            color: #00aa00;
        }

        .signal-direction span {
            font-size: 16px;
            font-weight: 700;
            color: #cc0000;
        }

        .signal-confidence {
            text-align: right;
        }

        .confidence-label {
            display: block;
            font-size: 11px;
            color: #b3b3b3;
            margin-bottom: 4px;
            text-transform: uppercase;
        }

        .confidence-value {
            font-size: 20px;
            font-weight: 700;
            color: #00ff7f;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .sidebar {
                width: 240px;
            }
            
            .timeframes {
                gap: 4px;
            }
            
            .timeframe-btn {
                padding: 6px 12px;
                font-size: 12px;
            }
        }

        @media (max-width: 768px) {
            body {
                overflow-y: auto;
                height: auto;
            }
            
            .top-bar {
                padding: 10px 12px;
                position: sticky;
                top: 0;
                z-index: 100;
            }
            
            .logo {
                font-size: 20px;
            }
            
            .demo-badge {
                padding: 4px 8px;
                font-size: 10px;
            }
            
            .balance {
                font-size: 16px;
            }
            
            .action-buttons {
                display: none;
            }
            
            .main-layout {
                flex-direction: column;
                height: auto;
                overflow: visible;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
                border-right: none;
                border-bottom: 1px solid #222;
                max-height: none;
            }
            
            .sidebar-menu {
                display: flex;
                overflow-x: auto;
                padding: 8px;
                scrollbar-width: none;
                -ms-overflow-style: none;
            }
            
            .sidebar-menu::-webkit-scrollbar {
                display: none;
            }
            
            .menu-item {
                white-space: nowrap;
                padding: 10px 16px;
                font-size: 13px;
            }
            
            .asset-categories {
                padding: 12px 0;
            }
            
            .category-title {
                padding: 0 16px;
                font-size: 12px;
            }
            
            .asset-search {
                margin: 0 16px 12px;
                width: calc(100% - 32px);
            }
            
            .asset-list {
                max-height: 200px;
            }
            
            .asset-item {
                padding: 10px 16px;
            }
            
            .asset-icon {
                width: 28px;
                height: 28px;
                font-size: 12px;
            }
            
            .chart-area {
                border-bottom: none;
                height: 400px;
                min-height: 300px;
            }
            
            .chart-header {
                padding: 12px 16px;
                flex-wrap: wrap;
                gap: 8px;
            }
            
            .asset-info {
                gap: 8px;
            }
            
            .asset-name {
                font-size: 16px;
            }
            
            .current-price {
                font-size: 20px;
            }
            
            .price-change {
                font-size: 12px;
            }
            
            .timeframes {
                width: 100%;
                overflow-x: auto;
                scrollbar-width: none;
                -ms-overflow-style: none;
                gap: 4px;
            }
            
            .timeframes::-webkit-scrollbar {
                display: none;
            }
            
            .timeframe-btn {
                padding: 6px 10px;
                font-size: 11px;
                flex-shrink: 0;
            }
            
            .chart-container {
                height: calc(100% - 80px);
            }
            
            .trading-panel {
                height: auto;
                flex-direction: column;
                gap: 16px;
                padding: 16px;
            }
            
            .trade-controls, .trade-result {
                width: 100%;
            }
            
            .panel-title {
                font-size: 16px;
                margin-bottom: 12px;
            }
            
            .input-group {
                margin-bottom: 12px;
            }
            
            .amount-buttons {
                gap: 6px;
            }
            
            .amount-btn {
                padding: 10px;
                font-size: 13px;
            }
            
            .prediction-signal {
                padding: 12px;
                margin-bottom: 12px;
            }
            
            .signal-header {
                font-size: 12px;
                margin-bottom: 8px;
            }
            
            .signal-direction {
                padding: 10px 12px;
                gap: 8px;
            }
            
            .signal-direction i {
                font-size: 20px;
            }
            
            .signal-direction span {
                font-size: 14px;
            }
            
            .confidence-value {
                font-size: 18px;
            }
            
            .trade-buttons {
                gap: 8px;
            }
            
            .trade-btn {
                padding: 14px 16px;
                font-size: 14px;
            }
            
            .result-icon {
                font-size: 40px;
            }
            
            .result-amount {
                font-size: 20px;
            }
            
            .result-text {
                font-size: 13px;
            }
            
            .modal-content {
                width: 95%;
                padding: 24px;
                margin: 16px;
            }
            
            .modal-title {
                font-size: 20px;
            }
            
            .modal-text {
                font-size: 14px;
            }
        }

        @media (max-width: 480px) {
            .logo-section {
                gap: 8px;
            }
            
            .logo {
                font-size: 18px;
            }
            
            .balance {
                font-size: 14px;
            }
            
            .asset-name {
                font-size: 14px;
            }
            
            .current-price {
                font-size: 18px;
            }
            
            .price-change {
                font-size: 11px;
            }
            
            .chart-area {
                height: 350px;
                min-height: 280px;
            }
            
            .timeframe-btn {
                padding: 5px 8px;
                font-size: 10px;
            }
            
            .trading-panel {
                padding: 12px;
            }
            
            .panel-title {
                font-size: 15px;
            }
            
            .amount-btn {
                padding: 8px;
                font-size: 12px;
            }
            
            .trade-btn {
                padding: 12px;
                font-size: 13px;
            }
            
            .prediction-signal {
                padding: 10px;
            }
            
            .signal-header {
                font-size: 11px;
            }
            
            .signal-direction {
                padding: 8px 10px;
            }
            
            .signal-direction i {
                font-size: 18px;
            }
            
            .signal-direction span {
                font-size: 13px;
            }
            
            .confidence-label {
                font-size: 10px;
            }
            
            .confidence-value {
                font-size: 16px;
            }
        }

        /* Touch device optimizations */
        @media (hover: none) and (pointer: coarse) {
            .menu-item,
            .asset-item,
            .amount-btn,
            .timeframe-btn,
            .trade-btn,
            .result-tab {
                min-height: 44px;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .category-header {
                min-height: 44px;
            }
            
            /* Improve tap targets */
            .trade-btn {
                padding: 16px;
            }
            
            .amount-btn {
                padding: 12px;
            }
        }
    </style>
</head>
<body>
    <!-- Top Bar -->
    <div class="top-bar">
        <div class="logo-section">
            <div class="logo">Quotex</div>
            <div class="demo-badge">DEMO ACCOUNT</div>
        </div>
        <div class="account-info">
            <div class="balance" id="balanceDisplay">$10,000.00</div>
            <div class="balance-type" id="balanceType" style="font-size: 12px; color: #b3b3b3;">DEMO</div>
            <div class="action-buttons">
                <button class="btn-secondary" id="depositBtn">Deposit USDT</button>
                <button class="btn-secondary" id="withdrawBtn">Withdraw</button>
            </div>
        </div>
    </div>

    <!-- TradingView Ticker Tape BEGIN -->
<div class="tradingview-widget-container">
  <div class="tradingview-widget-container__widget"></div>
  <script type="text/javascript"
    src="https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js"
    async>
  {
    "symbols": [
      {"proName": "BINANCE:BTCUSDT", "title": "Bitcoin"},
      {"proName": "BINANCE:ETHUSDT", "title": "Ethereum"},
      {"proName": "FX:EURUSD", "title": "EUR/USD"},
      {"proName": "NASDAQ:AAPL", "title": "Apple"},
      {"proName": "NASDAQ:TSLA", "title": "Tesla"}
    ],
    "showSymbolLogo": true,
    "colorTheme": "dark",
    "isTransparent": false,
    "displayMode": "adaptive",
    "locale": "en"
  }
  </script>
</div>
<!-- TradingView Ticker Tape END -->

    <!-- Main Layout -->
    <div class="main-layout">
        <!-- Left Sidebar -->
        <div class="sidebar">
            <nav class="sidebar-menu">
                <a href="#" class="menu-item active">
                    <i class="fas fa-chart-line"></i>
                    Trade
                </a>
                <a href="#" class="menu-item">
                    <i class="fas fa-history"></i>
                    History
                </a>
                <a href="#" class="menu-item">
                    <i class="fas fa-user"></i>
                    Account
                </a>
                <a href="#" class="menu-item">
                    <i class="fas fa-cog"></i>
                    Settings
                </a>
            </nav>

            <!-- Asset Categories -->
            <div class="asset-categories">
                <div class="category-title">Assets</div>
                <input type="text" class="asset-search" placeholder="Search assets..." id="assetSearch">

                <div class="category-section">
                    <div class="category-header" data-category="forex">
                        <span><i class="fas fa-dollar-sign"></i> Forex</span>
                        <i class="fas fa-chevron-down category-toggle"></i>
                    </div>
                    <div class="asset-list" id="forexList">
                        <div class="asset-item active" data-symbol="AUD/USD">
                            <div class="asset-info">
                                <div class="asset-icon">A</div>
                                <span>AUD/USD</span>
                            </div>
                            <div class="asset-price" id="audusd-price">0.6584</div>
                            <div class="asset-change negative" id="audusd-change">-0.12%</div>
                        </div>
                        <div class="asset-item" data-symbol="EUR/USD">
                            <div class="asset-info">
                                <div class="asset-icon">E</div>
                                <span>EUR/USD</span>
                            </div>
                            <div class="asset-price" id="eurusd-price">1.0845</div>
                            <div class="asset-change positive" id="eurusd-change">+0.08%</div>
                        </div>
                        <div class="asset-item" data-symbol="GBP/USD">
                            <div class="asset-info">
                                <div class="asset-icon">G</div>
                                <span>GBP/USD</span>
                            </div>
                            <div class="asset-price" id="gbpusd-price">1.2723</div>
                            <div class="asset-change negative" id="gbpusd-change">-0.05%</div>
                        </div>
                        <div class="asset-item" data-symbol="USD/JPY">
                            <div class="asset-info">
                                <div class="asset-icon">J</div>
                                <span>USD/JPY</span>
                            </div>
                            <div class="asset-price" id="usdjpy-price">157.82</div>
                            <div class="asset-change positive" id="usdjpy-change">+0.15%</div>
                        </div>
                    </div>
                </div>

                <div class="category-section">
                    <div class="category-header" data-category="crypto">
                        <span><i class="fab fa-bitcoin"></i> Crypto</span>
                        <i class="fas fa-chevron-down category-toggle"></i>
                    </div>
                    <div class="asset-list collapsed" id="cryptoList">
                        <div class="asset-item" data-symbol="BTC/USD">
                            <div class="asset-info">
                                <div class="asset-icon">‚Çø</div>
                                <span>BTC/USD</span>
                            </div>
                            <div class="asset-price" id="btcusd-price">43,250</div>
                            <div class="asset-change positive" id="btcusd-change">+2.34%</div>
                        </div>
                        <div class="asset-item" data-symbol="ETH/USD">
                            <div class="asset-info">
                                <div class="asset-icon">Œû</div>
                                <span>ETH/USD</span>
                            </div>
                            <div class="asset-price" id="ethusd-price">2,650</div>
                            <div class="asset-change negative" id="ethusd-change">-1.12%</div>
                        </div>
                    </div>
                </div>

                <div class="category-section">
                    <div class="category-header" data-category="stocks">
                        <span><i class="fas fa-chart-line"></i> Stocks</span>
                        <i class="fas fa-chevron-down category-toggle"></i>
                    </div>
                    <div class="asset-list collapsed" id="stocksList">
                        <div class="asset-item" data-symbol="AAPL">
                            <div class="asset-info">
                                <div class="asset-icon">üçé</div>
                                <span>Apple</span>
                            </div>
                            <div class="asset-price" id="aapl-price">195.00</div>
                            <div class="asset-change positive" id="aapl-change">+0.50%</div>
                        </div>
                        <div class="asset-item" data-symbol="GOOGL">
                            <div class="asset-info">
                                <div class="asset-icon">G</div>
                                <span>Google</span>
                            </div>
                            <div class="asset-price" id="googl-price">140.00</div>
                            <div class="asset-change negative" id="googl-change">-0.30%</div>
                        </div>
                        <div class="asset-item" data-symbol="MSFT">
                            <div class="asset-info">
                                <div class="asset-icon">M</div>
                                <span>Microsoft</span>
                            </div>
                            <div class="asset-price" id="msft-price">380.00</div>
                            <div class="asset-change positive" id="msft-change">+0.80%</div>
                        </div>
                        <div class="asset-item" data-symbol="TSLA">
                            <div class="asset-info">
                                <div class="asset-icon">T</div>
                                <span>Tesla</span>
                            </div>
                            <div class="asset-price" id="tsla-price">245.00</div>
                            <div class="asset-change positive" id="tsla-change">+1.20%</div>
                        </div>
                        <div class="asset-item" data-symbol="AMZN">
                            <div class="asset-info">
                                <div class="asset-icon">A</div>
                                <span>Amazon</span>
                            </div>
                            <div class="asset-price" id="amzn-price">155.00</div>
                            <div class="asset-change negative" id="amzn-change">-0.40%</div>
                        </div>
                        <div class="asset-item" data-symbol="NVDA">
                            <div class="asset-info">
                                <div class="asset-icon">N</div>
                                <span>NVIDIA</span>
                            </div>
                            <div class="asset-price" id="nvda-price">495.00</div>
                            <div class="asset-change positive" id="nvda-change">+2.10%</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Chart Area -->
            <div class="chart-area">
                <div class="chart-header">
                    <div class="asset-info">
                        <div class="asset-name">AUD/USD</div>
                        <div class="current-price" id="currentPrice">0.6584</div>
                        <div class="price-change" id="priceChange">-0.12%</div>
                    </div>
                <div class="timeframes">
                    <button class="timeframe-btn active" data-timeframe="1m">1m</button>
                    <button class="timeframe-btn" data-timeframe="2m">2m</button>
                    <button class="timeframe-btn" data-timeframe="5m">5m</button>
                    <button class="timeframe-btn" data-timeframe="15m">15m</button>
                    <button class="timeframe-btn" data-timeframe="30m">30m</button>
                    <button class="timeframe-btn" data-timeframe="1h">1h</button>
                    <button class="timeframe-btn" data-timeframe="2h">2h</button>
                    <button class="timeframe-btn" data-timeframe="4h">4h</button>
                    <button class="timeframe-btn" data-timeframe="1d">1d</button>
                </div>
                </div>
                <div class="chart-container">
                    <!-- TradingView Widget BEGIN -->
<div class="tradingview-widget-container">
  <div class="tradingview-widget-container__widget"></div>
  <div class="tradingview-widget-copyright"><a href="https://www.tradingview.com/symbols/BTCUSDT/?exchange=BINANCE" rel="noopener nofollow" target="_blank"><span class="blue-text">BTCUSDT rate</span></a><span class="trademark"> by TradingView</span></div>
  <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-mini-symbol-overview.js" async>
  {
  "symbol": "BINANCE:BTCUSDT",
  "chartOnly": false,
  "dateRange": "12M",
  "noTimeScale": false,
  "colorTheme": "light",
  "isTransparent": false,
  "locale": "en",
  "largeChartUrl": "quotex trade",
  "width": "100%",
  "autosize": true,
  "height": "100%"
}
  </script>
</div>
<!-- TradingView Widget END -->
                </div>
            </div>

            <!-- Trading Panel -->
            <div class="trading-panel">
                <div class="trade-controls">
                    <div class="panel-title">Trade</div>
                    <div class="input-group">
                        <label class="input-label">Stake Amount</label>
                    <div class="amount-buttons">
                            <button class="amount-btn active" data-amount="10">$10</button>
                            <button class="amount-btn" data-amount="50">$50</button>
                            <button class="amount-btn" data-amount="100">$100</button>
                            <button class="amount-btn" data-amount="500">$500</button>
                            <button class="amount-btn" data-amount="1000">$1,000</button>
                            <button class="amount-btn" data-amount="5000">$5,000</button>
                            <button class="amount-btn" data-amount="10000">$10,000</button>
                            <button class="amount-btn" data-amount="25000">$25,000</button>
                        </div>
                        <div style="margin-top: 8px; font-size: 12px; color: #00ff7f;">
                            Potential Win: $<span id="potentialWin">8.50</span> (85% payout)
                        </div>
                    </div>
                    <div class="input-group">
                        <label class="input-label">Time</label>
                        <div class="input-field">1 minute</div>
                    </div>
                    <div class="payout-info">
                        <span class="payout-label">Payout</span>
                        <span class="payout-value">85%</span>
                    </div>
                    
                    <!-- AI Prediction Signal -->
                    <div class="prediction-signal" id="predictionSignal">
                        <div class="signal-header">
                            <i class="fas fa-brain"></i>
                            <span>AI Prediction</span>
                        </div>
                        <div class="signal-body">
                            <div class="signal-direction" id="signalDirection">
                                <i class="fas fa-arrow-down"></i>
                                <span>BEARISH</span>
                            </div>
                            <div class="signal-confidence" id="signalConfidence">
                                <span class="confidence-label">Confidence:</span>
                                <span class="confidence-value">87%</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="trade-buttons">
                        <button class="trade-btn up" id="upBtn">
                            <i class="fas fa-arrow-up"></i> UP
                        </button>
                        <button class="trade-btn down" id="downBtn">
                            <i class="fas fa-arrow-down"></i> DOWN
                        </button>
                    </div>
                    <div id="countdown" class="countdown-timer"></div>
                </div>
                <div class="trade-result" id="tradeResult">
                    <div class="result-tabs">
                        <div class="result-tab active" data-tab="result">Result</div>
                        <div class="result-tab" data-tab="history">History</div>
                    </div>
                    <div class="tab-content" id="resultTab">
                        <div class="result-icon" id="resultIcon">
                            <i class="fas fa-play-circle"></i>
                        </div>
                        <div class="result-amount" id="resultAmount">Ready to Trade</div>
                        <div class="result-text" id="resultText">Select amount and direction to start trading</div>
                    </div>
                    <div class="tab-content trade-history" id="historyTab" style="display: none;">
                        <div id="tradeHistoryList">
                            <!-- Trade history will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Deposit Modal -->
    <div class="modal" id="depositModal">
        <div class="modal-content">
            <div class="modal-title">Deposit USDT</div>
            <div class="modal-text">
                <p style="margin-bottom: 12px;">Send USDT (TRC20) to the address below:</p>
                <div style="background: #0a0a0a; padding: 12px; border-radius: 8px; margin-bottom: 12px; word-break: break-all; font-family: monospace; font-size: 13px;">
                    TXhZrb4J8Kc9P2nVmWqS5YtGxBfDaH3uL6
                </div>
                <input type="number" id="depositAmount" placeholder="Enter amount in USDT" style="width: 100%; padding: 12px; margin-bottom: 12px; background: #0a0a0a; border: 1px solid #444; border-radius: 8px; color: #fff; font-size: 14px;">
                <p style="font-size: 12px; color: #b3b3b3;">Your balance will be updated after blockchain confirmation (5-10 minutes)</p>
            </div>
            <div class="modal-buttons">
                <button class="modal-btn secondary" onclick="closeModal('depositModal')">Cancel</button>
                <button class="modal-btn primary" onclick="simulateDeposit()">I Have Sent USDT</button>
            </div>
        </div>
    </div>

    <!-- Withdraw Modal -->
    <div class="modal" id="withdrawModal">
        <div class="modal-content">
            <div class="modal-title">Withdraw Funds</div>
            <div class="modal-text">
                <p style="margin-bottom: 12px; color: #00ff7f; font-weight: 700;">üí∞ Withdraw your profits instantly!</p>
                <p style="margin-bottom: 12px;">Enter your USDT wallet address (TRC20):</p>
                <input type="text" id="withdrawAddress" placeholder="TRC20 Wallet Address" style="width: 100%; padding: 12px; margin-bottom: 12px; background: #0a0a0a; border: 1px solid #444; border-radius: 8px; color: #fff; font-size: 14px;">
                <input type="number" id="withdrawAmount" placeholder="Amount in USDT (min $50)" style="width: 100%; padding: 12px; margin-bottom: 12px; background: #0a0a0a; border: 1px solid #444; border-radius: 8px; color: #fff; font-size: 14px;">
                <p style="font-size: 12px; color: #00ff7f; font-weight: 600;">‚ö° Fast processing! Funds arrive in 1-2 hours!</p>
            </div>
            <div class="modal-buttons">
                <button class="modal-btn secondary" onclick="closeModal('withdrawModal')">Cancel</button>
                <button class="modal-btn primary" onclick="simulateWithdraw()">Request Withdrawal</button>
            </div>
        </div>
    </div>
    
    <!-- Bot Signal Notification -->
    <div class="modal" id="botSignalModal">
        <div class="modal-content" style="border: 2px solid #00ff7f;">
            <div class="modal-title" style="color: #00ff7f;">
                <i class="fas fa-robot"></i> TRADE BOT SIGNAL
            </div>
            <div class="modal-text">
                <div style="background: #0a0a0a; padding: 20px; border-radius: 12px; margin-bottom: 16px;">
                    <div style="font-size: 24px; font-weight: 700; color: #00ff7f; margin-bottom: 8px;">
                        üí∞ GUARANTEED PROFIT OPPORTUNITY üí∞
                    </div>
                    <div style="font-size: 18px; margin-bottom: 12px;">
                        Asset: <span id="botAsset" style="color: #fff; font-weight: 700;">AUD/USD</span>
                    </div>
                    <div style="font-size: 32px; font-weight: 900; margin: 16px 0;">
                        <i class="fas fa-arrow-down" style="color: #cc0000;"></i>
                        <span id="botDirection" style="color: #cc0000;">DOWN</span>
                    </div>
                    <div style="font-size: 14px; color: #00ff7f;">
                        Success Rate: <span style="font-weight: 700;">99.8%</span>
                    </div>
                    <div style="font-size: 14px; color: #b3b3b3; margin-top: 8px;">
                        Recommended Stake: $<span id="botStake">500</span>
                    </div>
                </div>
                <div style="font-size: 13px; color: #ffaa00; text-align: center;">
                    ‚ö° URGENT SIGNAL! Act now or miss this guaranteed win! Expires in <span id="botTimer">15</span> seconds
                </div>
            </div>
            <div class="modal-buttons">
                <button class="modal-btn secondary" onclick="closeModal('botSignalModal')">Ignore</button>
                <button class="modal-btn primary" onclick="followBotSignal()">FOLLOW SIGNAL</button>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('tradingCanvas');
        const ctx = canvas.getContext('2d');
        let price = 0.6584;
        let candles = [];
        let activeTrade = null;
        let countdownInterval = null;
        let priceChange = -0.12;
        let selectedAmount = 10;
        let currentAsset = 'AUD/USD';
        let currentTimeframe = '1m';
        let wsConnection = null;
        let reconnectAttempts = 0;
        const MAX_RECONNECT_ATTEMPTS = 5;

        // Finnhub API Key - Using demo key (limited but works)
        const FINNHUB_API_KEY = 'demo'; // Use demo key for basic functionality
        
        // Asset data with price ranges and volatility - will be updated by API
        const assetData = {
            'AUD/USD': { price: 0.6584, change: -0.12, volatility: 0.0005, category: 'forex', symbol: 'OANDA:AUD_USD', finnhub: true },
            'EUR/USD': { price: 1.0845, change: 0.08, volatility: 0.0003, category: 'forex', symbol: 'OANDA:EUR_USD', finnhub: true },
            'GBP/USD': { price: 1.2723, change: -0.05, volatility: 0.0004, category: 'forex', symbol: 'OANDA:GBP_USD', finnhub: true },
            'USD/JPY': { price: 157.82, change: 0.15, volatility: 0.15, category: 'forex', symbol: 'OANDA:USD_JPY', finnhub: true },
            'BTC/USD': { price: 43250, change: 2.34, volatility: 50, category: 'crypto', symbol: 'BINANCE:BTCUSDT', finnhub: true },
            'ETH/USD': { price: 2650, change: -1.12, volatility: 15, category: 'crypto', symbol: 'BINANCE:ETHUSDT', finnhub: true },
            'AAPL': { price: 195.00, change: 0.50, volatility: 2, category: 'stocks', symbol: 'AAPL', finnhub: true },
            'GOOGL': { price: 140.00, change: -0.30, volatility: 1.5, category: 'stocks', symbol: 'GOOGL', finnhub: true },
            'MSFT': { price: 380.00, change: 0.80, volatility: 3, category: 'stocks', symbol: 'MSFT', finnhub: true },
            'TSLA': { price: 245.00, change: 1.20, volatility: 5, category: 'stocks', symbol: 'TSLA', finnhub: true },
            'AMZN': { price: 155.00, change: -0.40, volatility: 2.5, category: 'stocks', symbol: 'AMZN', finnhub: true },
            'NVDA': { price: 495.00, change: 2.10, volatility: 8, category: 'stocks', symbol: 'NVDA', finnhub: true }
        };

        // Statistics tracking
        let stats = {
            totalTrades: 0,
            wins: 0,
            losses: 0,
            totalProfit: 0,
            winRate: 0
        };

        // Fetch real-time data from Alpha Vantage API
        async function fetchAlphaVantagePrice(symbol) {
            try {
                const apiSymbol = assetData[symbol].symbol;
                const response = await fetch(`https://www.alphavantage.co/query?function=${apiSymbol}&apikey=${ALPHA_VANTAGE_KEY}`);
                const data = await response.json();
                
                if (data && !data['Error Message'] && !data['Note']) {
                    if (symbol.includes('USD/') || symbol.includes('/USD') || symbol.includes('/USDT')) {
                        // Forex or Crypto: Use the "Realtime Currency Exchange Rate" or "Digital Currency Daily"
                        if (data['Realtime Currency Exchange Rate']) {
                            const latestPrice = parseFloat(data['Realtime Currency Exchange Rate']['5. Exchange Rate']);
                            const previousPrice = assetData[symbol].price;
                            const change = ((latestPrice - previousPrice) / previousPrice) * 100;
                            
                            assetData[symbol].price = latestPrice;
                            assetData[symbol].change = change;
                            
                            if (symbol === currentAsset) {
                                price = latestPrice;
                                priceChange = change;
                            }
                            
                            return { price: latestPrice, change: change };
                        } else if (data['Time Series (FX)']) {
                            const times = Object.keys(data['Time Series (FX)']);
                            const latestData = data['Time Series (FX)'][times[0]];
                            const latestPrice = parseFloat(latestData['4. close']);
                            const previousPrice = assetData[symbol].price;
                            const change = ((latestPrice - previousPrice) / previousPrice) * 100;
                            
                            assetData[symbol].price = latestPrice;
                            assetData[symbol].change = change;
                            
                            if (symbol === currentAsset) {
                                price = latestPrice;
                                priceChange = change;
                            }
                            
                            return { price: latestPrice, change: change };
                        }
                    } else if (data['Meta Data']) {
                        // Stocks: Use "Time Series (Daily)"
                        const times = Object.keys(data['Time Series (Daily)']);
                        const latestData = data['Time Series (Daily)'][times[0]];
                        const latestPrice = parseFloat(latestData['4. close']);
                        const yesterdayData = data['Time Series (Daily)'][times[1]];
                        const yesterdayPrice = parseFloat(yesterdayData['4. close']);
                        const change = ((latestPrice - yesterdayPrice) / yesterdayPrice) * 100;
                        
                        assetData[symbol].price = latestPrice;
                        assetData[symbol].change = change;
                        
                        if (symbol === currentAsset) {
                            price = latestPrice;
                            priceChange = change;
                        }
                        
                        return { price: latestPrice, change: change };
                    }
                }
                console.log('API limit reached or data unavailable for', symbol);
            } catch (error) {
                console.error(`Error fetching ${symbol}:`, error);
            }
            return null;
        }

        // Fetch prices for all assets using Alpha Vantage
        async function updateAllAssetPrices() {
            console.log('Fetching prices from Alpha Vantage API...');
            for (const symbol in assetData) {
                await fetchAlphaVantagePrice(symbol);
                await new Promise(resolve => setTimeout(resolve, 12000)); // Alpha Vantage has strict 5 calls per minute limit
            }
            updateAssetPricesDisplay();
        }

        // WebSocket connection for real-time updates
        function connectWebSocket() {
            if (wsConnection && wsConnection.readyState === WebSocket.OPEN) {
                return;
            }

            wsConnection = new WebSocket(`wss://ws.finnhub.io?token=${FINNHUB_API_KEY}`);

            wsConnection.onopen = function() {
                console.log('WebSocket connected to Finnhub');
                // Subscribe to current asset
                const symbol = assetData[currentAsset].symbol;
                wsConnection.send(JSON.stringify({'type':'subscribe', 'symbol': symbol}));
            };

            wsConnection.onmessage = function(event) {
                const data = JSON.parse(event.data);
                if (data.type === 'trade' && data.data) {
                    data.data.forEach(trade => {
                        // Update price with real-time trade data
                        price = trade.p;
                        updatePriceDisplay();
                        
                        // Update candle
                        currentCandle.close = price;
                        currentCandle.high = Math.max(currentCandle.high, price);
                        currentCandle.low = Math.min(currentCandle.low, price);
                        drawCandles();
                    });
                }
            };

            wsConnection.onerror = function(error) {
                console.error('WebSocket error:', error);
            };

            wsConnection.onclose = function() {
                console.log('WebSocket disconnected');
                // Reconnect after 5 seconds
                setTimeout(() => {
                    if (reconnectAttempts < MAX_RECONNECT_ATTEMPTS) {
                        reconnectAttempts++;
                        connectWebSocket();
                    }
                }, 5000);
            };
        }

        // Update asset prices display in sidebar
        function updateAssetPricesDisplay() {
            Object.keys(assetData).forEach(symbol => {
                const data = assetData[symbol];
                const priceElement = document.getElementById(symbol.toLowerCase().replace('/', '') + '-price');
                const changeElement = document.getElementById(symbol.toLowerCase().replace('/', '') + '-change');
                
                if (priceElement) {
                    let decimals = 4;
                    if (symbol.includes('JPY')) decimals = 2;
                    if (symbol.includes('BTC')) decimals = 0;
                    if (symbol.includes('ETH')) decimals = 0;
                    if (symbol === 'SPX' || symbol === 'NDX') decimals = 0;
                    if (symbol.includes('XAU') || symbol.includes('XAG')) decimals = 2;
                    
                    priceElement.textContent = data.price.toFixed(decimals);
                }
                
                if (changeElement) {
                    changeElement.textContent = `${data.change > 0 ? '+' : ''}${data.change.toFixed(2)}%`;
                    changeElement.className = data.change > 0 ? 'asset-change positive' : 'asset-change negative';
                }
            });
        }

        // Update statistics
        function updateStats() {
            if (stats.totalTrades > 0) {
                stats.winRate = (stats.wins / stats.totalTrades * 100).toFixed(1);
            }
        }

        // Generate realistic initial candles
        function generateInitialCandles(asset, count = 100) {
            const data = assetData[asset];
            const candles = [];
            let currentPrice = data.price;
            
            // Add some trend to make it look more realistic
            const trendStrength = (Math.random() - 0.5) * 0.3;

            for (let i = 0; i < count; i++) {
                const volatility = data.volatility;
                // Mix random movement with trend
                const randomChange = (Math.random() - 0.5) * volatility * 2;
                const trendChange = volatility * trendStrength;
                const change = randomChange + trendChange;
                
                const open = currentPrice;
                const close = open + change;
                const high = Math.max(open, close) + Math.random() * volatility * 0.8;
                const low = Math.min(open, close) - Math.random() * volatility * 0.8;

                candles.push({
                    open: open,
                    high: high,
                    low: low,
                    close: close,
                    timestamp: Date.now() - (count - i) * 60000
                });

                currentPrice = close;
            }

            return candles;
        }

        function resizeCanvas() {
            const container = canvas.parentElement;
            canvas.width = container.clientWidth;
            canvas.height = container.clientHeight;
        }

        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        function drawCandles() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            if (candles.length === 0) return;

            // Include current candle in calculations
            const allCandles = [...candles, currentCandle];
            const candleWidth = canvas.width / allCandles.length;
            const priceRange = Math.max(...allCandles.map(c => c.high)) - Math.min(...allCandles.map(c => c.low));
            const scale = canvas.height / priceRange;
            const minPrice = Math.min(...allCandles.map(c => c.low));

            // Grid lines
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.05)';
            ctx.lineWidth = 1;
            for (let i = 0; i <= 10; i++) {
                const y = (canvas.height / 10) * i;
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(canvas.width, y);
                ctx.stroke();
            }

            allCandles.forEach((candle, index) => {
                const x = index * candleWidth;
                const openY = canvas.height - (candle.open - minPrice) * scale;
                const closeY = canvas.height - (candle.close - minPrice) * scale;
                const highY = canvas.height - (candle.high - minPrice) * scale;
                const lowY = canvas.height - (candle.low - minPrice) * scale;

                // Wick
                ctx.strokeStyle = '#666';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(x + candleWidth / 2, highY);
                ctx.lineTo(x + candleWidth / 2, lowY);
                ctx.stroke();

                // Body - current candle is semi-transparent
                const bodyHeight = Math.abs(closeY - openY);
                const bodyY = Math.min(openY, closeY);
                const isCurrentCandle = index === allCandles.length - 1;
                ctx.fillStyle = candle.close > candle.open ?
                    (isCurrentCandle ? 'rgba(0, 170, 0, 0.7)' : '#00aa00') :
                    (isCurrentCandle ? 'rgba(204, 0, 0, 0.7)' : '#cc0000');
                ctx.fillRect(x + candleWidth * 0.2, bodyY, candleWidth * 0.6, bodyHeight || 2);
            });

            // Draw entry line if active trade
            if (activeTrade) {
                const entryY = canvas.height - (activeTrade.entryPrice - minPrice) * scale;
                ctx.strokeStyle = '#ffff00';
                ctx.lineWidth = 2;
                ctx.setLineDash([8, 4]);
                ctx.beginPath();
                ctx.moveTo(0, entryY);
                ctx.lineTo(canvas.width, entryY);
                ctx.stroke();
                ctx.setLineDash([]);
            }
        }

        function startTrade(direction) {
            const expiry = 60; // 1 minute

            activeTrade = {
                direction,
                entryPrice: price,
                expiryTime: Date.now() + expiry * 1000,
                stake: selectedAmount,
                id: Date.now()
            };

            document.getElementById('upBtn').disabled = true;
            document.getElementById('downBtn').disabled = true;
            document.getElementById('countdown').style.display = 'block';

            // Update result display
            document.getElementById('resultIcon').innerHTML = '<i class="fas fa-clock"></i>';
            document.getElementById('resultAmount').textContent = 'Trading...';
            document.getElementById('resultText').textContent = `Waiting for ${expiry} seconds`;

            updateCountdown();
            countdownInterval = setInterval(updateCountdown, 100);
        }

        function updateCountdown() {
            if (!activeTrade) return;

            const remaining = Math.max(0, activeTrade.expiryTime - Date.now());
            const seconds = Math.ceil(remaining / 1000);
            document.getElementById('countdown').textContent = `${seconds}s`;

            // Update result display
            document.getElementById('resultAmount').textContent = `${seconds}s remaining`;
            document.getElementById('resultText').textContent = `Entry: ${activeTrade.entryPrice.toFixed(4)}`;

            if (remaining <= 0) {
                completeTrade();
            }
        }

        function completeTrade() {
            clearInterval(countdownInterval);
            const finalPrice = price; // Use current live price

            // PREDICTION LOGIC: Rigged system like real scam sites
            // Start with high win rate to build trust, then lose when stakes get high
            let isWin;
            const stakeAmount = activeTrade.stake;
            const randomFactor = Math.random();

            if (activeTrade.direction === 'down') {
                // DOWN trades: Very high win rate initially, decreases with higher stakes
                if (stakeAmount <= 100) {
                    isWin = randomFactor < 0.98; // 98% win rate for small amounts
                } else if (stakeAmount <= 1000) {
                    isWin = randomFactor < 0.85; // 85% win rate for medium amounts
                } else {
                    isWin = randomFactor < 0.15; // Only 15% win rate for high amounts
                }
            } else {
                // UP trades: Always low win rate to force DOWN trading
                isWin = randomFactor < 0.02; // Only 2% win rate for UP trades
            }

            // Adjust final price to match the rigged outcome
            if (isWin) {
                if (activeTrade.direction === 'down' && finalPrice >= activeTrade.entryPrice) {
                    price = activeTrade.entryPrice - (Math.random() * 0.0002 + 0.0001);
                } else if (activeTrade.direction === 'up' && finalPrice <= activeTrade.entryPrice) {
                    price = activeTrade.entryPrice + (Math.random() * 0.0002 + 0.0001);
                }
            } else {
                if (activeTrade.direction === 'down' && finalPrice < activeTrade.entryPrice) {
                    price = activeTrade.entryPrice + (Math.random() * 0.0002 + 0.0001);
                } else if (activeTrade.direction === 'up' && finalPrice > activeTrade.entryPrice) {
                    price = activeTrade.entryPrice - (Math.random() * 0.0002 + 0.0001);
                }
            }
            
            // Update the actual price to match
            price = finalPrice;

            const profit = isWin ? activeTrade.stake * 0.85 : -activeTrade.stake;

            // Update balance
            const balanceElement = document.getElementById('balanceDisplay');
            let currentBalance;
            
            if (isDemo) {
                currentBalance = demoBalance;
                demoBalance = Math.max(0, demoBalance + profit);
                balanceElement.textContent = '$' + demoBalance.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
            } else {
                currentBalance = realBalance;
                realBalance = Math.max(0, realBalance + profit);
                balanceElement.textContent = '$' + realBalance.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
            }

            // Determine decimal places for price display
            let decimals = 4;
            if (currentAsset.includes('JPY')) decimals = 2;
            if (currentAsset.includes('BTC')) decimals = 0;
            if (currentAsset.includes('ETH')) decimals = 0;
            if (currentAsset === 'SPX' || currentAsset === 'NDX') decimals = 0;
            if (currentAsset.includes('XAU') || currentAsset.includes('XAG')) decimals = 2;

            // Update result display
            if (isWin) {
                document.getElementById('resultIcon').innerHTML = '<i class="fas fa-check-circle" style="color: #00aa00;"></i>';
                document.getElementById('resultAmount').textContent = `+$${profit.toFixed(2)}`;
                document.getElementById('resultText').textContent = `Won! ${activeTrade.entryPrice.toFixed(decimals)} ‚Üí ${finalPrice.toFixed(decimals)}`;
            } else {
                document.getElementById('resultIcon').innerHTML = '<i class="fas fa-times-circle" style="color: #cc0000;"></i>';
                document.getElementById('resultAmount').textContent = `-$${Math.abs(profit).toFixed(2)}`;
                document.getElementById('resultText').textContent = `Lost! ${activeTrade.entryPrice.toFixed(decimals)} ‚Üí ${finalPrice.toFixed(decimals)}`;
            }

            // Update statistics
            stats.totalTrades++;
            if (isWin) {
                stats.wins++;
            } else {
                stats.losses++;
            }
            stats.totalProfit += profit;
            updateStats();

            // Add to history
            addToHistory({
                id: activeTrade.id,
                asset: currentAsset,
                direction: activeTrade.direction,
                stake: activeTrade.stake,
                entryPrice: activeTrade.entryPrice,
                finalPrice: finalPrice,
                profit: profit,
                timestamp: new Date().toLocaleTimeString()
            });

            // Reset
            activeTrade = null;
            document.getElementById('countdown').style.display = 'none';
            document.getElementById('upBtn').disabled = false;
            document.getElementById('downBtn').disabled = false;

            // Reset result display after 5 seconds
            setTimeout(() => {
                document.getElementById('resultIcon').innerHTML = '<i class="fas fa-play-circle"></i>';
                document.getElementById('resultAmount').textContent = 'Ready to Trade';
                document.getElementById('resultText').textContent = 'Select amount and direction to start trading';
            }, 5000);
        }

        function updatePriceDisplay() {
            const data = assetData[currentAsset];
            let decimals = 4;
            if (currentAsset.includes('JPY')) decimals = 2;
            if (currentAsset.includes('BTC')) decimals = 0;
            if (currentAsset.includes('ETH')) decimals = 0;
            if (currentAsset === 'SPX' || currentAsset === 'NDX') decimals = 0;
            if (currentAsset.includes('XAU') || currentAsset.includes('XAG')) decimals = 2;
            
            document.getElementById('currentPrice').textContent = price.toFixed(decimals);
            
            // Calculate percentage change from starting price
            const startPrice = data.price;
            priceChange = ((price - startPrice) / startPrice) * 100;
            
            const changeElement = document.getElementById('priceChange');
            changeElement.textContent = `${priceChange > 0 ? '+' : ''}${priceChange.toFixed(2)}%`;
            changeElement.style.color = priceChange > 0 ? '#00aa00' : '#cc0000';
            
            // Update current price color based on movement
            const priceElement = document.getElementById('currentPrice');
            priceElement.style.color = priceChange > 0 ? '#00aa00' : '#cc0000';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('show');
        }

        function simulateDeposit() {
            const depositAmount = parseFloat(document.getElementById('depositAmount').value);

            if (!depositAmount || depositAmount < 50) {
                alert('Minimum deposit amount is $50');
                return;
            }

            closeModal('depositModal');

            // Show convincing processing message
            alert(`üöÄ DEPOSIT INITIATED!\n\nAmount: $${depositAmount} USDT\nTo: TXhZrb4J8Kc9P2nVmWqS5YtGxBfDaH3uL6\n\n‚è≥ Processing... Please wait 5-10 minutes for blockchain confirmation.\n\nüí° Once confirmed, you'll switch to LIVE trading with real profits!`);

            // Simulate blockchain confirmation after 3 seconds (for demo)
            setTimeout(() => {
                // Switch to real balance
                isDemo = false;
                realBalance += depositAmount;

                // Update balance display
                document.getElementById('balanceDisplay').textContent = '$' + realBalance.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
                document.getElementById('balanceType').textContent = 'REAL';
                document.getElementById('balanceType').style.color = '#00ff7f';
                document.querySelector('.demo-badge').textContent = 'LIVE ACCOUNT';
                document.querySelector('.demo-badge').style.background = '#00aa00';

                alert(`üéâ DEPOSIT SUCCESSFUL!\n\n$${depositAmount} USDT credited to your account!\n\nüéØ Now you can trade with real money and withdraw profits instantly!\n\nüí∞ Start making real profits now!`);
            }, 3000);
        }

        function simulateWithdraw() {
            const withdrawAddress = document.getElementById('withdrawAddress').value;
            const withdrawAmount = parseFloat(document.getElementById('withdrawAmount').value);
            
            if (!withdrawAddress || withdrawAddress.length < 30) {
                alert('Please enter a valid TRC20 wallet address');
                return;
            }
            
            if (!withdrawAmount || withdrawAmount <= 0) {
                alert('Please enter a valid amount');
                return;
            }
            
            const currentBalance = isDemo ? demoBalance : realBalance;
            
            if (withdrawAmount > currentBalance) {
                alert('Insufficient balance');
                return;
            }
            
            closeModal('withdrawModal');
            
            // Show processing message (withdrawal will never process in scam)
            alert(`Withdrawal request submitted for $${withdrawAmount} USDT to address: ${withdrawAddress.substring(0, 10)}...${withdrawAddress.substring(withdrawAddress.length - 6)}\n\nProcessing time: 24-48 hours\n\n(Note: In reality, the withdrawal would be delayed or never processed)`);
        }

        // Current candle tracking
        let currentCandle = {
            open: price,
            high: price,
            low: price,
            close: price,
            timestamp: Date.now()
        };

        // Trade history array
        let tradeHistory = [];

        // Price simulation function
        function startPriceSimulation() {
            setInterval(() => {
                const data = assetData[currentAsset];
                const volatility = data.volatility;
                const change = (Math.random() - 0.5) * volatility * 2;
                
                // Update price
                price += change;
                
                // Update current candle
                currentCandle.close = price;
                currentCandle.high = Math.max(currentCandle.high, price);
                currentCandle.low = Math.min(currentCandle.low, price);
                
                // Update price displays
                updatePriceDisplay();
                drawCandles();
                
                // Update asset list prices
                updateAssetPrices();
            }, 1000); // Update every second
            
            // Create new candle every minute
            setInterval(() => {
                candles.push({...currentCandle});
                if (candles.length > 50) {
                    candles.shift();
                }
                currentCandle = {
                    open: price,
                    high: price,
                    low: price,
                    close: price,
                    timestamp: Date.now()
                };
            }, 60000); // New candle every minute
        }

        // Update asset prices in the sidebar
        function updateAssetPrices() {
            Object.keys(assetData).forEach(symbol => {
                const data = assetData[symbol];
                const priceElement = document.getElementById(symbol.toLowerCase().replace('/', '') + '-price');
                const changeElement = document.getElementById(symbol.toLowerCase().replace('/', '') + '-change');
                
                if (priceElement && symbol === currentAsset) {
                    priceElement.textContent = price.toFixed(symbol.includes('JPY') || symbol.includes('BTC') || symbol.includes('ETH') || symbol.includes('SPX') || symbol.includes('NDX') ? 0 : 4);
                }
            });
        }

        // Add trade to history
        function addToHistory(trade) {
            tradeHistory.unshift(trade);
            if (tradeHistory.length > 10) {
                tradeHistory.pop();
            }
            updateHistoryDisplay();
        }

        // Update history tab display
        function updateHistoryDisplay() {
            const historyList = document.getElementById('tradeHistoryList');
            if (tradeHistory.length === 0) {
                historyList.innerHTML = '<div style="color: #b3b3b3; padding: 20px;">No trades yet</div>';
                return;
            }
            
            historyList.innerHTML = tradeHistory.map(trade => `
                <div style="padding: 12px; border-bottom: 1px solid #333; text-align: left;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                        <span style="font-weight: 600;">${trade.asset}</span>
                        <span style="color: ${trade.profit > 0 ? '#00aa00' : '#cc0000'}; font-weight: 700;">
                            ${trade.profit > 0 ? '+' : ''}$${trade.profit.toFixed(2)}
                        </span>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 12px; color: #b3b3b3;">
                        <span>${trade.direction.toUpperCase()} ‚Ä¢ $${trade.stake}</span>
                        <span>${trade.timestamp}</span>
                    </div>
                </div>
            `).join('');
        }

        // Result tab switching
        document.querySelectorAll('.result-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.result-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                const tabName = tab.dataset.tab;
                if (tabName === 'result') {
                    document.getElementById('resultTab').style.display = 'block';
                    document.getElementById('historyTab').style.display = 'none';
                } else {
                    document.getElementById('resultTab').style.display = 'none';
                    document.getElementById('historyTab').style.display = 'block';
                }
            });
        });

        // Initialize with generated candles
        candles = generateInitialCandles(currentAsset);
        currentCandle = {
            open: price,
            high: price,
            low: price,
            close: price,
            timestamp: Date.now()
        };

        // Update display
        updatePriceDisplay();
        drawCandles();
        updateHistoryDisplay();

        // Fetch real-time data on load
        updateAllAssetPrices();
        
        // Connect to WebSocket for live updates
        connectWebSocket();
        
        // Refresh prices every 5 seconds
        setInterval(updateAllAssetPrices, 5000);
        
        // Start bot signal scheduler
        scheduleBotSignals();

        // Event listeners
        document.getElementById('upBtn').addEventListener('click', () => startTrade('up'));
        document.getElementById('downBtn').addEventListener('click', () => startTrade('down'));

        document.getElementById('depositBtn').addEventListener('click', () => {
            document.getElementById('depositModal').classList.add('show');
        });

        document.getElementById('withdrawBtn').addEventListener('click', () => {
            document.getElementById('withdrawModal').classList.add('show');
        });

        // Account mode tracking
        let isDemo = true; // Start in demo mode
        let realBalance = 0;
        let demoBalance = 10000;

        // Bot signal system
        let botSignalTimer = null;
        let botSignalCountdown = null;

        function showBotSignal() {
            // Random signal direction (always DOWN for rigged system)
            const direction = 'down';
            const recommendedStake = [100, 200, 500, 1000, 2000, 5000][Math.floor(Math.random() * 6)];
            
            document.getElementById('botAsset').textContent = currentAsset;
            document.getElementById('botDirection').textContent = direction.toUpperCase();
            document.getElementById('botStake').textContent = recommendedStake;
            
            // Update icon
            if (direction === 'down') {
                document.querySelector('#botSignalModal .modal-text > div > div:nth-child(3) i').className = 'fas fa-arrow-down';
                document.querySelector('#botSignalModal .modal-text > div > div:nth-child(3) i').style.color = '#cc0000';
                document.querySelector('#botSignalModal .modal-text > div > div:nth-child(3) span').style.color = '#cc0000';
            }
            
            // Show modal
            document.getElementById('botSignalModal').classList.add('show');
            
            // Countdown timer
            let timer = 15;
            document.getElementById('botTimer').textContent = timer;
            
            botSignalCountdown = setInterval(() => {
                timer--;
                document.getElementById('botTimer').textContent = timer;
                if (timer <= 0) {
                    clearInterval(botSignalCountdown);
                    closeModal('botSignalModal');
                }
            }, 1000);
        }

        function followBotSignal() {
            clearInterval(botSignalCountdown);
            closeModal('botSignalModal');
            
            // Set the recommended stake
            const recommendedStake = parseInt(document.getElementById('botStake').textContent);
            selectedAmount = recommendedStake;
            
            // Highlight the stake button
            document.querySelectorAll('.amount-btn').forEach(b => b.classList.remove('active'));
            const matchingBtn = document.querySelector(`[data-amount="${recommendedStake}"]`);
            if (matchingBtn) {
                matchingBtn.classList.add('active');
            }
            
            // Update potential win display
            document.getElementById('potentialWin').textContent = (recommendedStake * 0.85).toFixed(2);
            
            // Auto-click DOWN button
            setTimeout(() => {
                document.getElementById('downBtn').click();
            }, 500);
        }

        // Show bot signal every 30-60 seconds randomly
        function scheduleBotSignals() {
            const randomDelay = Math.random() * 30000 + 30000; // 30-60 seconds
            botSignalTimer = setTimeout(() => {
                if (!activeTrade && stats.totalTrades > 2) {
                    showBotSignal();
                }
                scheduleBotSignals();
            }, randomDelay);
        }

        // Amount selection
        document.querySelectorAll('.amount-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.amount-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                selectedAmount = parseInt(btn.dataset.amount);

                // Update potential win display - show high profit potential like scam sites
                const potentialWin = selectedAmount * 0.85;
                document.getElementById('potentialWin').textContent = potentialWin.toFixed(2);

                // Show potential winnings up to $30,000 for high stakes
                if (selectedAmount >= 10000) {
                    const highWin = selectedAmount * 2.5; // Show exaggerated potential
                    document.getElementById('potentialWin').textContent = highWin.toFixed(0);
                }
            });
        });

        function switchAsset(symbol) {
            // Update active state
            document.querySelectorAll('.asset-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelector(`[data-symbol="${symbol}"]`).classList.add('active');

            // Update current asset
            currentAsset = symbol;
            const data = assetData[symbol];

            // Update price
            price = data.price;
            priceChange = data.change;

            // Generate new candles for this asset
            candles = generateInitialCandles(symbol);
            currentCandle = {
                open: price,
                high: price,
                low: price,
                close: price,
                timestamp: Date.now()
            };

            // Update asset name display
            document.querySelector('.asset-name').textContent = symbol;

            // Update display
            updatePriceDisplay();
            drawCandles();
        }

        // Asset selection
        document.querySelectorAll('.asset-item').forEach(item => {
            item.addEventListener('click', () => {
                const symbol = item.dataset.symbol;
                switchAsset(symbol);
            });
        });

        // Category toggling
        document.querySelectorAll('.category-header').forEach(header => {
            header.addEventListener('click', () => {
                const category = header.dataset.category;
                const list = document.getElementById(category + 'List');
                const toggle = header.querySelector('.category-toggle');

                list.classList.toggle('collapsed');
                toggle.classList.toggle('fa-chevron-down');
                toggle.classList.toggle('fa-chevron-up');
            });
        });

        // Asset search
        document.getElementById('assetSearch').addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            document.querySelectorAll('.asset-item').forEach(item => {
                const symbol = item.dataset.symbol.toLowerCase();
                const name = item.querySelector('span').textContent.toLowerCase();
                if (symbol.includes(searchTerm) || name.includes(searchTerm)) {
                    item.style.display = 'flex';
                } else {
                    item.style.display = 'none';
                }
            });
        });

        // Timeframe selection
        document.querySelectorAll('.timeframe-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.timeframe-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentTimeframe = btn.dataset.timeframe;
                // Note: In a real implementation, this would change the candle timeframe
            });
        });
    </script>
</body>
</html>
